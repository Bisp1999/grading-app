{% extends 'base.html' %}
{% block title %}Schools | Grading App{% endblock %}
{% block content %}
<h2>My Schools</h2>
<form method="post" class="mb-4">
    {{ form.hidden_tag() }}
    <div class="input-group">
        {{ form.name(class="form-control", placeholder="Enter school name") }}
        <button type="submit" class="btn btn-success">Add School</button>
    </div>
</form>
<ul class="list-group">
    {% for school in schools %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ school.name }}
        <div class="btn-group" role="group">
            <a href="{{ url_for('main.edit_school', school_id=school.id) }}" class="btn btn-sm btn-warning">Edit</a>
            <form id="delete-form-{{ school.id }}" action="{{ url_for('main.delete_school', school_id=school.id) }}" method="post" style="display:inline;">
                <button type="button" class="btn btn-sm btn-danger" onclick="confirmDelete({{ school.id }})">Delete</button>
            </form>
        </div>
        </span>
    </li>
    {% else %}
    <li class="list-group-item">No schools yet.</li>
    {% endfor %}
</ul>
<script>
function confirmDelete(schoolId) {
    if (confirm('Deleting a school will also delete all its classrooms and students.\n\nAre you absolutely sure that you want to delete this school?')) {
        document.getElementById('delete-form-' + schoolId).submit();
    }
}
</script>
{% endblock %}
